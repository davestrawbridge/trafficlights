<!DOCTYPE html>
<html>
	<body>
		<img id="lights">
		<script>

			var imgSequence = [
				{ duration : 1, image : "red.png"},
				{ duration : 1, image : "red-and-amber.png"},
				{ duration : 1, image : "green.png"},
				{ duration : 1, image : "amber.png"}
			];
			var imgElement = document.getElementById("lights");
			var lightIndex = 0;
			var timeIndex = 0;
			var imgLen = imgSequence.length;
			imgElement.src = imgSequence[lightIndex].image;

			function onTick()
			{
				timeIndex++;
				
				if (timeIndex == imgSequence[lightIndex].duration)
				{
					timeIndex = 0;
					changeColour();
				}
			}
			
			function changeColour()
			{
				if(lightIndex < imgLen - 1)
				{
					lightIndex++;
				}
				else
				{
					lightIndex = 0;                
				}

				imgElement.src = imgSequence[lightIndex].image;                    
			}

			setInterval(onTick, 1000);
		</script>
	</body>
</html>